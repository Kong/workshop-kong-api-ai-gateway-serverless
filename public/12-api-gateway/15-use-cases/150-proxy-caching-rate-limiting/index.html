<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.150.1">
    <meta name="generator" content="Relearn 8.0.0+9803d5122ebb3276acea823f476e9eb44f607862">
    <meta name="description" content="Proxy Caching provides a reverse proxy cache implementation for Kong. It caches response entities based on configurable response code and content type, as well as request method. It can cache per-Consumer or per-API. Cache entities are stored for a configurable period of time, after which subsequent requests to the same resource will re-fetch and re-store the resource. Cache entities can also be forcefully purged via the Admin API prior to their expiration time.">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Proxy Caching and Rate Limiting :: API Management with Kong Konnect and Serverless API Gateway">
    <meta name="twitter:description" content="Proxy Caching provides a reverse proxy cache implementation for Kong. It caches response entities based on configurable response code and content type, as well as request method. It can cache per-Consumer or per-API. Cache entities are stored for a configurable period of time, after which subsequent requests to the same resource will re-fetch and re-store the resource. Cache entities can also be forcefully purged via the Admin API prior to their expiration time.">
    <meta property="og:url" content="http://localhost:1313/12-api-gateway/15-use-cases/150-proxy-caching-rate-limiting/index.html">
    <meta property="og:site_name" content="API Management with Kong Konnect and Serverless API Gateway">
    <meta property="og:title" content="Proxy Caching and Rate Limiting :: API Management with Kong Konnect and Serverless API Gateway">
    <meta property="og:description" content="Proxy Caching provides a reverse proxy cache implementation for Kong. It caches response entities based on configurable response code and content type, as well as request method. It can cache per-Consumer or per-API. Cache entities are stored for a configurable period of time, after which subsequent requests to the same resource will re-fetch and re-store the resource. Cache entities can also be forcefully purged via the Admin API prior to their expiration time.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Kong API Gateway">
    <meta itemprop="name" content="Proxy Caching and Rate Limiting :: API Management with Kong Konnect and Serverless API Gateway">
    <meta itemprop="description" content="Proxy Caching provides a reverse proxy cache implementation for Kong. It caches response entities based on configurable response code and content type, as well as request method. It can cache per-Consumer or per-API. Cache entities are stored for a configurable period of time, after which subsequent requests to the same resource will re-fetch and re-store the resource. Cache entities can also be forcefully purged via the Admin API prior to their expiration time.">
    <meta itemprop="wordCount" content="963">
    <title>Proxy Caching and Rate Limiting :: API Management with Kong Konnect and Serverless API Gateway</title>
    <link href="/css/auto-complete/auto-complete.min.css?1758893331" rel="stylesheet">
    <script src="/js/auto-complete/auto-complete.min.js?1758893331" defer></script>
    <script src="/js/search-lunr.js?1758893331" defer></script>
    <script src="/js/search.js?1758893331" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/searchindex.en.js?1758893331";
    </script>
    <script src="/js/lunr/lunr.min.js?1758893331" defer></script>
    <script src="/js/lunr/lunr.stemmer.support.min.js?1758893331" defer></script>
    <script src="/js/lunr/lunr.multi.min.js?1758893331" defer></script>
    <script src="/js/lunr/lunr.en.min.js?1758893331" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/fonts/fontawesome/css/fontawesome-all.min.css?1758893331" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/fonts/fontawesome/css/fontawesome-all.min.css?1758893331" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar/perfect-scrollbar.min.css?1758893331" rel="stylesheet">
    <link href="/css/theme.css?1758893331" rel="stylesheet">
    <link href="/css/format-html.css?1758893331" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = ``;
      window.relearn.path='\/12-api-gateway\/15-use-cases\/150-proxy-caching-rate-limiting\/index.html';
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='http:\/\/localhost:1313';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'blue' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
  </head>
  <body class="mobile-support html" data-url="/12-api-gateway/15-use-cases/150-proxy-caching-rate-limiting/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#kong-gateway-plugin-list">Kong Gateway Plugin list</a></li>
        <li><a href="#enabling-a-kong-plugin-on-a-kong-service">Enabling a Kong Plugin on a Kong Service</a></li>
        <li><a href="#enabling-a-kong-plugin-on-a-kong-route">Enabling a Kong Plugin on a Kong Route</a></li>
        <li><a href="#enabling-a-kong-plugin-globally">Enabling a Kong Plugin globally</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/index.html"><span itemprop="name">API Management with Kong Konnect and Serverless API Gateway</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/12-api-gateway/index.html"><span itemprop="name">Kong API Gateway</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/12-api-gateway/15-use-cases/index.html"><span itemprop="name">Use Cases</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">Proxy Caching and Rate Limiting</span><meta itemprop="position" content="4"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/12-api-gateway/15-use-cases/index.html" title="Use Cases (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/12-api-gateway/15-use-cases/152-key-authn-rate-limiting/index.html" title="API Key Authentication and Rate Limiting (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable 12-api-gateway" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="proxy-caching-and-rate-limiting">Proxy Caching and Rate Limiting</h1>

<p><a href="https://docs.konghq.com/hub/kong-inc/proxy-cache/" rel="external" target="_blank">Proxy Caching</a> provides a reverse proxy cache implementation for Kong. It caches response entities based on configurable response code and content type, as well as request method. It can cache per-Consumer or per-API. Cache entities are stored for a configurable period of time, after which subsequent requests to the same resource will re-fetch and re-store the resource. Cache entities can also be forcefully purged via the Admin API prior to their expiration time.</p>
<h3 id="kong-gateway-plugin-list">Kong Gateway Plugin list</h3>
<p>Before enabling the <strong>Proxy Caching</strong>, let&rsquo;s check the list of plugins Konnect provides. Inside the <code>serverless-default</code> Control Plane, click on <strong>Plugins</strong> menu option and <strong>+ New plugin</strong>. You should the following page with all plugins available:</p>
<p><a href="#R-image-2971e57c80a5d6cc3a8e447082939cdf" class="lightbox-link"><img alt="proxy_cache" class="lazy lightbox figure-image" loading="lazy" src="/static/images/plugins.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2971e57c80a5d6cc3a8e447082939cdf"><img alt="proxy_cache" class="lazy lightbox lightbox-image" loading="lazy" src="/static/images/plugins.png"></a></p>
<h3 id="enabling-a-kong-plugin-on-a-kong-service">Enabling a Kong Plugin on a Kong Service</h3>
<p>Create another declaration with <code>plugins</code> option. With this option you can enable and configure the plugin on your Kong Service.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>cat &gt; httpbin.yaml &lt;&lt; &#39;EOF&#39;
_format_version: &#34;3.0&#34;
_konnect:
  control_plane_name: serverless-default
_info:
  select_tags:
  - httpbin-service-route
services:
- name: httpbin-service
  tags:
  - httpbin-service-route
  host: httpbin.konghq.com
  port: 80
  plugins:
  - name: proxy-cache
    instance_name: proxy-cache1
    config:
      strategy: memory
      cache_ttl: 30
  routes:
  - name: httpbin-route
    tags:
    - httpbin-service-route
    paths:
    - /httpbin-route
EOF</code></pre></div>
<p>For the plugin configuration we used the following settings:</p>
<ul>
<li><strong>strategy</strong> with <code>memory</code>. The plugin will use the Runtime Instance&rsquo;s memory to implement to cache.</li>
<li><strong>cache_ttl</strong> with <code>30</code>, which means the plugin will clear all data that reached this time limit.</li>
</ul>
<p>All plugin configuration paramenters are described inside <a href="https://docs.konghq.com/hub/" rel="external" target="_blank"><strong>Kong Plugin Hub</strong></a> portal, in its specific <a href="https://docs.konghq.com/hub/kong-inc/proxy-cache/" rel="external" target="_blank">documentation page</a>.</p>
<h4 id="submit-the-new-declaration">Submit the new declaration</h4>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>deck gateway sync --konnect-token $PAT httpbin.yaml</code></pre></div>
<p><strong>Expected Output</strong></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>creating plugin proxy-cache for service httpbin-service
Summary:
  Created: 1
  Updated: 0
  Deleted: 0</code></pre></div>
<h4 id="consume-the-service">Consume the Service</h4>
<p>If you consume the service again, you&rsquo;ll see some new headers describing the caching status:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>curl -i $DATA_PLANE_URL/httpbin-route/get</code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>HTTP/2 200 
content-type: application/json
content-length: 500
x-kong-request-id: abd3f90c6ecbbb0a0939fb2edab2b40d
x-cache-key: f44e43eff1a09eeb35e0436a117f95f9363267d79089b8bdd950f85ca6247e97
x-cache-status: Miss
server: gunicorn/19.9.0
date: Tue, 23 Sep 2025 12:16:15 GMT
access-control-allow-origin: *
access-control-allow-credentials: true
x-kong-upstream-latency: 13
x-kong-proxy-latency: 1
via: 1.1 kong/3.11.0.0-enterprise-edition

{
  &#34;args&#34;: {}, 
  &#34;headers&#34;: {
    &#34;Accept&#34;: &#34;*/*&#34;, 
    &#34;Connection&#34;: &#34;keep-alive&#34;, 
    &#34;Host&#34;: &#34;httpbin.konghq.com&#34;, 
    &#34;User-Agent&#34;: &#34;curl/8.7.1&#34;, 
    &#34;X-Forwarded-Host&#34;: &#34;kong-cceb6a93c9usmc2hk.kongcloud.dev&#34;, 
    &#34;X-Forwarded-Path&#34;: &#34;/httpbin-route/get&#34;, 
    &#34;X-Forwarded-Prefix&#34;: &#34;/httpbin-route&#34;, 
    &#34;X-Kong-Request-Id&#34;: &#34;abd3f90c6ecbbb0a0939fb2edab2b40d&#34;
  }, 
  &#34;origin&#34;: &#34;186.204.54.49, 66.51.127.198, 172.16.12.194&#34;, 
  &#34;url&#34;: &#34;https://kong-cceb6a93c9usmc2hk.kongcloud.dev/get&#34;
}</code></pre></div>
<p>Notice that, for the first request we get <strong>Miss</strong> for the <strong>X-Cache-Status</strong> header, meaning that the Runtime Instance didn&rsquo;t have any data avaialble in the cache and had to connect to the Upstream Service, <code>httpbin.org</code>.</p>
<p>If we send a new request, the Runtime Instance has all it needs to satify the request, therefore the status is <strong>Hit</strong>. Note that the latency time has dropped considerably.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>% curl -i $DATA_PLANE_URL/httpbin-route/get
HTTP/2 200 
content-type: application/json
x-kong-request-id: 4ad5c907f84c167c3eb3f716200ae17c
x-cache-key: f44e43eff1a09eeb35e0436a117f95f9363267d79089b8bdd950f85ca6247e97
date: Tue, 23 Sep 2025 12:16:46 GMT
server: gunicorn/19.9.0
age: 3
x-cache-status: Hit
access-control-allow-origin: *
access-control-allow-credentials: true
content-length: 500
x-kong-upstream-latency: 0
x-kong-proxy-latency: 1
via: 1.1 kong/3.11.0.0-enterprise-edition

{
  &#34;args&#34;: {}, 
  &#34;headers&#34;: {
    &#34;Accept&#34;: &#34;*/*&#34;, 
    &#34;Connection&#34;: &#34;keep-alive&#34;, 
    &#34;Host&#34;: &#34;httpbin.konghq.com&#34;, 
    &#34;User-Agent&#34;: &#34;curl/8.7.1&#34;, 
    &#34;X-Forwarded-Host&#34;: &#34;kong-cceb6a93c9usmc2hk.kongcloud.dev&#34;, 
    &#34;X-Forwarded-Path&#34;: &#34;/httpbin-route/get&#34;, 
    &#34;X-Forwarded-Prefix&#34;: &#34;/httpbin-route&#34;, 
    &#34;X-Kong-Request-Id&#34;: &#34;70184e54f9235642a310362396089529&#34;
  }, 
  &#34;origin&#34;: &#34;186.204.54.49, 66.51.127.198, 172.16.12.194&#34;, 
  &#34;url&#34;: &#34;https://kong-cceb6a93c9usmc2hk.kongcloud.dev/get&#34;
}</code></pre></div>
<h3 id="enabling-a-kong-plugin-on-a-kong-route">Enabling a Kong Plugin on a Kong Route</h3>
<p>Now, we are going to define a Rate Limiting policy for our Service. This time, you are going to enable the <strong>Rate Limiting</strong> plugin to the Kong Route, not to the Kong Gateway Service. In this sense, new Routes defined for the Service will not have the Rate Limiting plugin enabled, only the Proxy Caching.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>cat &gt; httpbin.yaml &lt;&lt; &#39;EOF&#39;
_format_version: &#34;3.0&#34;
_konnect:
  control_plane_name: serverless-default
_info:
  select_tags:
  - httpbin-service-route
services:
- name: httpbin-service
  tags:
  - httpbin-service-route
  host: httpbin.konghq.com
  port: 80
  plugins:
  - name: proxy-cache
    config:
      strategy: memory
      cache_ttl: 30
  routes:
  - name: httpbin-route
    tags:
    - httpbin-service-route
    paths:
    - /httpbin-route
    plugins:
    - name: rate-limiting
      instance_name: rate-limiting1
      config:
        minute: 3
EOF</code></pre></div>
<p>The configuration includes:</p>
<ul>
<li><strong>minute</strong> as <code>3</code>, which means the Route can be consumed only 3 times a given minute.</li>
</ul>
<h4 id="submit-the-declaration">Submit the declaration</h4>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>deck gateway sync --konnect-token $PAT httpbin.yaml</code></pre></div>
<h4 id="consume-the-service-1">Consume the Service</h4>
<p>If you consume the service again, you&rsquo;ll see, besides the caching related headers, new ones describing the status of current rate limiting policy:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>curl -i $DATA_PLANE_URL/httpbin-route/get</code></pre></div>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>HTTP/2 200 
content-type: application/json
content-length: 500
x-kong-request-id: dc73a70617cde444eada947550425656
ratelimit-limit: 3
ratelimit-remaining: 2
x-ratelimit-limit-minute: 3
x-ratelimit-remaining-minute: 2
ratelimit-reset: 29
x-cache-key: f44e43eff1a09eeb35e0436a117f95f9363267d79089b8bdd950f85ca6247e97
x-cache-status: Miss
server: gunicorn/19.9.0
date: Tue, 23 Sep 2025 12:19:31 GMT
access-control-allow-origin: *
access-control-allow-credentials: true
x-kong-upstream-latency: 8
x-kong-proxy-latency: 1
via: 1.1 kong/3.11.0.0-enterprise-edition

{
  &#34;args&#34;: {}, 
  &#34;headers&#34;: {
    &#34;Accept&#34;: &#34;*/*&#34;, 
    &#34;Connection&#34;: &#34;keep-alive&#34;, 
    &#34;Host&#34;: &#34;httpbin.konghq.com&#34;, 
    &#34;User-Agent&#34;: &#34;curl/8.7.1&#34;, 
    &#34;X-Forwarded-Host&#34;: &#34;kong-cceb6a93c9usmc2hk.kongcloud.dev&#34;, 
    &#34;X-Forwarded-Path&#34;: &#34;/httpbin-route/get&#34;, 
    &#34;X-Forwarded-Prefix&#34;: &#34;/httpbin-route&#34;, 
    &#34;X-Kong-Request-Id&#34;: &#34;dc73a70617cde444eada947550425656&#34;
  }, 
  &#34;origin&#34;: &#34;186.204.54.49, 66.51.127.198, 172.16.12.194&#34;, 
  &#34;url&#34;: &#34;https://kong-cceb6a93c9usmc2hk.kongcloud.dev/get&#34;
}</code></pre></div>
<p>If you keep sending new requests to the Runtime Instance, eventually, you&rsquo;ll get a <strong>429</strong> error code, meaning you have reached the consumption rate limiting policy for this Route.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>% curl -i $DATA_PLANE_URL/httpbin-route/get
HTTP/2 429 
date: Tue, 23 Sep 2025 12:19:37 GMT
content-type: application/json; charset=utf-8
x-kong-request-id: bf61f204c78bc7404721310d6a35ec11
retry-after: 23
ratelimit-limit: 3
ratelimit-remaining: 0
x-ratelimit-limit-minute: 3
x-ratelimit-remaining-minute: 0
ratelimit-reset: 23
content-length: 92
x-kong-response-latency: 0
server: kong/3.11.0.0-enterprise-edition

{
  &#34;message&#34;:&#34;API rate limit exceeded&#34;,
  &#34;request_id&#34;:&#34;bf61f204c78bc7404721310d6a35ec11&#34;
}</code></pre></div>
<h3 id="enabling-a-kong-plugin-globally">Enabling a Kong Plugin globally</h3>
<p>Besides scoping a plugin to a Kong Service or Route, we can apply it globally also. When we do it so, all Services ans Routes will enforce the police described by the plugin.</p>
<p>For example, let&rsquo;s apply the Proxy Caching plugin globally.</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>cat &gt; httpbin.yaml &lt;&lt; &#39;EOF&#39;
_format_version: &#34;3.0&#34;
_konnect:
  control_plane_name: serverless-default
_info:
  select_tags:
  - httpbin-service-route
plugins:
- name: proxy-cache
  config:
    strategy: memory
    cache_ttl: 30
services:
- name: httpbin-service
  tags:
  - httpbin-service-route
  host: httpbin.konghq.com
  port: 80
  routes:
  - name: httpbin-route
    tags:
    - httpbin-service-route
    paths:
    - /httpbin-route
    plugins:
    - name: rate-limiting
      instance_name: rate-limiting1
      config:
        minute: 3
EOF</code></pre></div>
<h4 id="submit-the-declaration-1">Submit the declaration</h4>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>deck gateway sync --konnect-token $PAT httpbin.yaml</code></pre></div>
<ul>
<li>Expected output</li>
</ul>
<p>Note the first Proxy Cache instance is deleted to get the Control Plane state synced with the declaratio:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>creating plugin proxy-cache (global)
deleting plugin proxy-cache for service httpbin-service
Summary:
  Created: 1
  Updated: 0
  Deleted: 1</code></pre></div>
<p>After testing the configuration, reset the Control Plane:</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>deck gateway reset --konnect-control-plane-name serverless-default --konnect-token $PAT -f</code></pre></div>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
          <a id="R-logo" class="R-default" href="/index.html">
            <div class="logo-title">API Management with Kong Konnect and Serverless API Gateway</div>
          </a>
        </div>
        <search><form action="/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="/index.html"><a class="padding" href="/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-id="/10-prerequisites/index.html"><a class="padding" href="/10-prerequisites/index.html">Prerequisites</a><ul id="R-subsections-cdc0df3ea972ffd3a9c45dea986dc8ab" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/architecture/index.html"><a class="padding" href="/architecture/index.html">Kong Konnect Architectural Overview</a></li>
            <li class="" data-nav-id="/11-konnect-setup/index.html"><a class="padding" href="/11-konnect-setup/index.html">Konnect Setup</a><ul id="R-subsections-fd457d3a7fac9b2f9cefa5c6c0dae1e7" class="collapsible-menu"></ul></li>
            <li class="parent " data-nav-id="/12-api-gateway/index.html"><a class="padding" href="/12-api-gateway/index.html">Kong API Gateway</a><ul id="R-subsections-edeba57bcdf65a92672ecb9c5ed9177f" class="collapsible-menu">
            <li class="" data-nav-id="/12-api-gateway/121-kong-service-route/index.html"><a class="padding" href="/12-api-gateway/121-kong-service-route/index.html">Kong Gateway Service, Kong Route and Kong Plugin</a></li>
            <li class="" data-nav-id="/12-api-gateway/122-oas-import/index.html"><a class="padding" href="/12-api-gateway/122-oas-import/index.html">Import an OpenAPI specification</a></li>
            <li class="" data-nav-id="/12-api-gateway/123-kong-service-route-deck/index.html"><a class="padding" href="/12-api-gateway/123-kong-service-route-deck/index.html">Use decK to create Kong Objects</a></li>
            <li class="parent alwaysopen " data-nav-id="/12-api-gateway/15-use-cases/index.html"><a class="padding" href="/12-api-gateway/15-use-cases/index.html">Use Cases</a><ul id="R-subsections-d072a953a914cdb4c69798f4d5bdaaed" class="collapsible-menu">
            <li class="active " data-nav-id="/12-api-gateway/15-use-cases/150-proxy-caching-rate-limiting/index.html"><a class="padding" href="/12-api-gateway/15-use-cases/150-proxy-caching-rate-limiting/index.html">Proxy Caching and Rate Limiting</a></li>
            <li class="" data-nav-id="/12-api-gateway/15-use-cases/152-key-authn-rate-limiting/index.html"><a class="padding" href="/12-api-gateway/15-use-cases/152-key-authn-rate-limiting/index.html">API Key Authentication and Rate Limiting</a></li>
            <li class="" data-nav-id="/12-api-gateway/15-use-cases/153-response-transformer/index.html"><a class="padding" href="/12-api-gateway/15-use-cases/153-response-transformer/index.html">Response Transformer</a></li>
            <li class="" data-nav-id="/12-api-gateway/15-use-cases/154-request-callout/index.html"><a class="padding" href="/12-api-gateway/15-use-cases/154-request-callout/index.html">Request Callout</a></li>
            <li class="alwaysopen " data-nav-id="/12-api-gateway/15-use-cases/157-openidconnect/index.html"><a class="padding" href="/12-api-gateway/15-use-cases/157-openidconnect/index.html">OpenID Connect</a><ul id="R-subsections-34875f368b35fa0fde449b57e732d3fb" class="collapsible-menu"></ul></li></ul></li></ul></li>
            <li class="" data-nav-id="/14-apiops-deck/index.html"><a class="padding" href="/14-apiops-deck/index.html">APIOps and decK</a></li>
            <li class="" data-nav-id="/15-developer-portal/index.html"><a class="padding" href="/15-developer-portal/index.html">Konnect Developer Portal</a><ul id="R-subsections-21b3550f5b82a7619e2d221f57fdbc43" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/16-ai-gateway/index.html"><a class="padding" href="/16-ai-gateway/index.html">Kong AI Gateway</a><ul id="R-subsections-2f2bf218915a29de3a144cfa324a5fc4" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/20-observability/index.html"><a class="padding" href="/20-observability/index.html">Konnect Builtin Observability</a><ul id="R-subsections-3829b558aa20efb46efd7e331dc0c9e9" class="collapsible-menu"></ul></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
          </ul>
        </div>
<div id="R-footer"><p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p></div>
      </div>
    </aside>
    <script src="/js/clipboard/clipboard.min.js?1758893331" defer></script>
    <script src="/js/perfect-scrollbar/perfect-scrollbar.min.js?1758893331" defer></script>
    <script src="/js/theme.js?1758893331" defer></script>
  </body>
</html>
